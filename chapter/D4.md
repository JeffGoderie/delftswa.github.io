#Metrics
This section describes the quality of the software, using the [GQM](http://www.im-institute.org/gqm/gqm%20guide%20non%20printable.pdf). 
The complete approach is summarised in the following diagram:

![GQM diagram](gqm.png)
<!--- 
	You can adopt the diagram on this page, please update the gqm.png snapshot.
http://www.nomnoml.com/#view/%0A[Goal]%0A[Goal]->[Scalability]%0A[Goal]->[Maintainability]%0A[Scalability]->[Resources%20per%20request]%0A[Scalability]->[Throughput]%0A[Maintainability]->[Module%20size%20LOC/module]%0A[Maintainability]->[Module%20size%20over%20time]%0A[Maintainability]->[#Spin-off%20modules]
	You can adapt the diagram on this page, please update the gqm.png snapshot.
http://www.nomnoml.com/#view/%0A[Goal]%0A[Goal]->[Scalability]%0A[Goal]->[Maintainability]%0A[Goal]->[Adoption]%0A[Scalability]->[Resources%20per%20request]%0A[Scalability]->[Throughput]%0A[Maintainability]->[Module%20size%20LOC/module]%0A[Maintainability]->[Module%20size%20over%20time]%0A[Maintainability]->[#Spin-off%20modules]%0A[Adoption]->[Stackoverflow%20questions]%0A[Adoption]->[Job%20positions]%0A%0A
-->

##Goal
Play is a framework that aims to be chosen by its clients in cases where large web applications have to be developed. 
Therefore, one of the major goal of the developers of Play can be defined as: _"Developing an attractive web application framework that users want to build web applications of scale with."_


Attractive is objective and may be interpreted by a broad set of characteristics such as; reliable, robust, flexible, maintainable, etc. 
The following sections will go in depth on some of these characteristics.

##Questions
In this section, three questions will be formulated that focus on characterising the assessment or achievement of the goal that has been defined in the section above.

###Maintainability
The first metric is defined by the maintainability of the system. 
We define this as _"How maintainable is the Play Framework?"_. 
Maintainability forms an important aspect, the web environment and the applications around it develop over time. 
The technology advances over the past ten years are vast and to keep up with further technological demands, the system must be able to adapt to this.


###Scalability
The second question that can be formulated is _"How scalable is the Play framework?"_.
Scalability is an important aspect for a web development framework that aims to support large web applications. 
It ensures that a web application continues to operate according to standards, while the demand increases.

###Adoption

The third questions relate to the extend to which it useful to invest in learning Play Framework.
It is formulated as _"How is the environment adopted to Play Framework?"_.
For this question we try to measure the programming environment and show to which extend the community is active supporting Play.


##Metrics

###Scalability
There are two types of scalability that can be measured. 
Horizontal scalability is the amount of nodes that can be added to a system in order to improve the speed under large loads. 
Vertical scalability is the amount of resources (in processing power) that can be added to a node to improve the speed of the system. 
Play offeres built in horizontal scaling principles, for example that it is stateless by nature. 
However, in this question we will focus on vertical scalability, as clearer measurements exists for measuring the characteristics of this type of scalability.
 
The metrics that can be defined for measuring vertical scalability of a web application are:

* Throughput
* Latency

#####Throughput
**Entity:** Play Framework
<br>**Attribute:** scalability
<br>**Mapping:** number of requests per second
<br>**Measure:** HTTP requests/second (RPS)
<br>**Scale:** non-negative floating point (ratio)

The throughput of a system is a key aspect that tells a lot about the efficiently of the application. 
The higher the throughput, the more requests it may be able to handle per unit of time.
This increases the amount of requests that can be handled when the demand of requests is high and thus increases the scalability of the framework.

The metric we define for throughput is: _HTTP requests/second (RPS)_.

The HTTP request in Play 2.3 and earlier are by default [handled by Netty](https://www.playframework.com/documentation/1.1/api/play/mvc/class-use/Http.Request.html). 
Several tests have been performed between the most commonly used web development frameworks. 
A few of the results are listed below.

* 9.000 requests/second in a test performed by [TechEmpower](http://www.techempower.com/blog/2013/04/05/frameworks-round-2/). The test consisted of JSON-request using an Amazon EC2 Large instance. Netty itself takes the lead with a staggering 37.9k request/sec.
* 2.400 requests/second in a test performed by [Christian Papauschek](http://blog.papauschek.com/2013/04/real-world-performance-of-the-play-framework-on-ec2/) in 2013. In this test, a Play 2.1.1-scala production instance running on EC2 large was used to service complete webpages.


#####Time per request
**Entity:** Play Framework
<br>**Attribute:** scalability
<br>**Mapping:** number of requests per second
<br>**Measure:** ms/HTTP request
<br>**Scale:** non-negative floating point (ratio)
Latency is a relevant metric for web applications, because it provides information about the efficiency of handling a request. 
The more efficient a request is handled, the lower the latency in large demands and thus the more scalable the application is.

The metric (applied to Play) we define for this is: _ms/HTTP request_.

The Play framework maintains a testing tool ([Prune](https://github.com/playframework/prune)) that automates the performance tests of different versions of Play framework. 
One of the metrics that is tested is latency. 

Prune automates 6 tests cases that differ in the kind of operation. 
Test cases vary from a simple plain text response of `Hello world` to a download response of 50kbit. 
 
In the test results below it is shown that the latency of the 50k requests is significantly higher (~40ms) than the latency of the plain text response (~0.5ms). 
This is likely due to the fact that the 50k-test uses a file `50k.bin` that has to be read from disk at execution of the test and reading from disk is a [slow process](http://www.doc.ic.ac.uk/~eedwards/compsys/memory/) compared to reading from memory. 

![](./50k_chuck.png)
_50kbit request_

![](./simple_request.png)
_Simple plain text request_


A typical difference between Scala and Java applications of Play users exists. 
Writing in Scala generally allows for more readable and understandable asynchronous code, versus the traditional synchronous Java style. 
James Roper [describes](http://architects.dzone.com/articles/scaling-scala-vs-java) this as "Scala helps you scale much more than Java does". 
In a typical example case the Java variant would be written in a blocking fashion, degrading the performance of concurrent requests, lowering vertical scalability. 
This effect may contribute to the difference in the latency measurements between a Java and a Scala application.

Judging from these graphs, we can see that the Play Framework performs constantly well on the metrics.
With the exception of a few versions.
We think it is important to keep a close watch on these metrics, as they tell about the performance of the system. 







###Maintainability

#####Module size LOC

#####Module size over time

#####Number of spin-off modules

###Adoption 
In this section we describe the metrics related to the adoption question.

#####Stackoverflow questions
**Entity:** Play Framework
<br>**Attribute:** adoption
<br>**Mapping:** count stack overflow questions
<br>**Measure:** number
<br>**Scale:** non-negative integer

The idea behind this question is that the amount of questions on [Stack Overflow](http://stackoverflow.com) reflects the usage of the Play Framework.
A high value would mean that a considerable amount of people is trying to use Play, while a low number can mean two things: either it is very easy to understand, or there is not so much usage.

We have compared the number of questions for the Play Framework versus Spring MVC. Spring MVC is another Java web framework from the Spring landscape. Note that Spring focusses mainly on pure Java.

To gather data for this metric we used the [Stack Overflow API](https://api.stackexchange.com/docs), using our own code. We searched for all issues tagged with either `playframework` or `spring-mvc`. The resulting ____ questions are plotted this metric on the following chart.

![Histogram Play](frequenogramStackoverflow.png)
The histogram above shows all months up untill the last month (march 2015).
The years under the x-axis are indicative.
This histogram shows that the amount of questions on Play remains rather constant, with a slight decrease in the last few months, while the number of questions for Spring MVC is increasing almost linearly over time.
The questions asked are from people actually using these frameworks, for either production applications or hobby projects.

Assuming that number of questions asked gives a good estimate of adoptation, 
we can infer that both frameworks have quite some adoptation, with more than 200 and 750 questions per month, respectively.
Comparing to Spring MVC however, we see that more and more people are actively using and questioning about Spring MVC than Play. We could say that Play is quite adopted but there is no *buzz* at the moment.

Of course many other causes for this can exist too, other than adoptation. Play might be documented so well that little questions need to be asked. 
Or the release cycle of Play might explain the declining amount of questions as no major release was shipped since May 30, 2014: all minor releases are binary compatible, so for quite some time now no migrations have been needed.

#####Number of job openings
For this metric we look at the number of job openings on [indeed](http://www.indeed.com).
We compare the number of job openings for each framework.
The higher the number, the more adopted the framework is in companies. 

To measure this metric we compare it to a number of other frameworks.
We compare it to two JavaScript frameworks: Node.js and AngularJS, two JVM based frameworks: Scalatra and Spring MVC, and to ASP.NET MVC framework.  

![job opnenings barchart](job.png)

From this bar chart we can judge that the Play Framework has some job openings, but they are relatively small compared to existing frameworks.
Judging from this we can state that Play has not been adopted as much as other major players.
Still, working as a developer pays off, as the salaries range in $90k-$180k a year.

This metric does not say everything and should only be taken only as an indication.
It could be that there is a lot more adoption of Play, but that it is generally not listed on job sites.

Another question that arose while looking at this data was: What language should we program in if we want to become a Play Framework developer?
We looked at the 198 openings and then searched whether they required Java or Scala as a skill.
What we found is summarised in the following pie chart:

![Extra skill pie chart](extraSkill.png)
